(()=>{"use strict";var e=document.querySelector(".popup__form"),t=e.querySelector(".popup__item"),o=(e.querySelector(".".concat(t.id,"-error")),function(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?t.classList.remove("popup__button-activ"):t.classList.add("popup__button-activ")}),n=document.querySelector(".popup-profile"),r=document.querySelector(".popup-avatar"),c=document.querySelector(".popup-place"),u=document.querySelector(".popup-img"),a=document.querySelector(".profile"),i=a.querySelector(".profile__edit-button"),p=n.querySelector(".popup__close-button"),l=n.querySelector(".popup__button"),s=a.querySelector(".profile__title"),d=a.querySelector(".profile__subtitle"),_=a.querySelector(".profile__avatar-overlay"),m=a.querySelector(".profile__avatar"),f=n.querySelector(".popup__container"),y=document.getElementById("name-input"),v=document.getElementById("prof-input"),S=document.getElementById("avatar-input"),b=a.querySelector(".profile__add-button"),q=c.querySelector(".popup__close-button"),h=r.querySelector(".popup__close-button"),L=document.querySelector(".elements"),E=u.querySelector(".popup-img__image"),g=u.querySelector(".popup-img__title"),k=c.querySelector(".popup__container"),C=r.querySelector(".popup__container"),T=c.querySelector(".popup__button"),x=r.querySelector(".popup__button"),j=document.getElementById("place-input"),A=document.getElementById("email-input"),B=u.querySelector(".popup__close-button");function I(e){e.classList.add("popup_opened")}function U(e){e.classList.remove("popup_opened")}function z(e,t){var o=document.querySelector("#place-template").content.querySelector(".elements__element").cloneNode(!0),n=o.querySelector(".elements__image");return n.src=t,n.alt=e,o.querySelector(".elements__group-title").textContent=e,o.querySelector(".elements__group-icon").addEventListener("click",(function(e){e.target.classList.toggle("elements__group-icon_activ")})),o.querySelector(".elements__close-button").addEventListener("click",(function(){o.remove()})),n.addEventListener("click",(function(){E.src=t,E.alt=e,g.textContent=e,I(u)})),o}document.querySelector(".elements__close-button"),document.addEventListener("keydown",(function(e){"Escape"===e.key&&U(document.querySelector(".popup_opened"))})),document.addEventListener("click",(function(e){e.target.classList.contains("popup_opened")&&U(e.target)}));var D,N={baseUrl:"https://nomoreparties.co/v1/plus-cohort-6",headers:{authorization:"98c6601a-800a-42cb-b9f5-2fd5c4ee4584","Content-Type":"application/json"}};i.addEventListener("click",(function(){I(n)})),p.addEventListener("click",(function(){U(n)})),_.addEventListener("click",(function(){I(r)})),h.addEventListener("click",(function(){U(r)})),b.addEventListener("click",(function(){document.getElementById("formPlace").reset(),I(c)})),q.addEventListener("click",(function(){U(c)})),B.addEventListener("click",(function(){U(u)})),f.addEventListener("submit",(function(e){e.preventDefault();var t=y.value,o=v.value;s.textContent=t,d.textContent=o,function(e,t){fetch("".concat(N.baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:"98c6601a-800a-42cb-b9f5-2fd5c4ee4584","Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})})}(t,o),l.classList.add("popup__button-activ"),e.target.reset(),U(n)})),k.addEventListener("submit",(function(e){e.preventDefault();var t=j.value,o=A.value,n=z(t,o);L.prepend(n),function(e,t){fetch("https://nomoreparties.co/v1/plus-cohort-6/cards ",{method:"POST",headers:{authorization:"98c6601a-800a-42cb-b9f5-2fd5c4ee4584","Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})}).then((function(e){console.log(e)}))}(t,o),T.classList.add("popup__button-activ"),e.target.reset(),U(c)})),C.addEventListener("submit",(function(e){e.preventDefault();var t=S.value;m.src=t,function(e){fetch("".concat(N.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{authorization:"98c6601a-800a-42cb-b9f5-2fd5c4ee4584","Content-Type":"application/json"},body:JSON.stringify({avatar:e})})}(t),x.classList.add("popup__button-activ"),e.target.reset(),U(r)})),Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e){var t=Array.from(e.querySelectorAll(".popup__item")),n=e.querySelector(".popup__button");o(t,n),t.forEach((function(r){r.addEventListener("input",(function(){!function(e,t){t.validity.valid?function(e,t){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("popup__item_type_error"),o.classList.add("popup__item-error_activ"),o.textContent=""}(e,t):function(e,t,o){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.add("popup__item_type_error"),n.textContent=o,n.classList.add("popup__item-error_activ")}(e,t,t.validationMessage)}(e,r),o(t,n)}))}))}(e)})),fetch("".concat(N.baseUrl,"/cards"),{method:"GET",headers:N.headers}).then((function(e){return e.json()})).then((function(e){e.forEach((function(e){L.append(z(e.name,e.link))}))})),fetch("".concat(N.baseUrl,"/users/me"),{method:"GET",headers:N.headers}).then((function(e){return e.json()})).then((function(e){s.textContent=e.name,d.textContent=e.about,m.src=e.avatar,D=e._id,console.log(D)})),z()})();