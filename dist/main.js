(()=>{"use strict";var e=document.querySelector(".popup__form"),t=e.querySelector(".popup__item"),o=(e.querySelector(".".concat(t.id,"-error")),function(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?t.classList.remove("popup__button-activ"):t.classList.add("popup__button-activ")}),n=document.querySelector(".popup-profile"),r=document.querySelector(".popup-place"),c=document.querySelector(".popup-img"),u=document.querySelector(".profile"),i=u.querySelector(".profile__edit-button"),p=n.querySelector(".popup__close-button"),l=(n.querySelector(".popup__button"),u.querySelector(".profile__title")),a=u.querySelector(".profile__subtitle"),s=n.querySelector(".popup__container"),d=document.getElementById("name-input"),_=document.getElementById("prof-input"),m=u.querySelector(".profile__add-button"),f=r.querySelector(".popup__close-button"),y=document.querySelector(".elements"),v=c.querySelector(".popup-img__image"),S=c.querySelector(".popup-img__title"),q=r.querySelector(".popup__container"),P=(r.querySelector(".popup__button"),document.getElementById("place-input")),h=document.getElementById("email-input"),E=c.querySelector(".popup__close-button");function b(e){e.classList.add("popup_opened")}function L(e){e.classList.remove("popup_opened")}function g(e,t){var o=document.querySelector("#place-template").content.querySelector(".elements__element").cloneNode(!0),n=o.querySelector(".elements__image");return n.src=t,n.alt=e,o.querySelector(".elements__group-title").textContent=e,o.querySelector(".elements__group-icon").addEventListener("click",(function(e){e.target.classList.toggle("elements__group-icon_activ")})),o.querySelector(".elements__close-button").addEventListener("click",(function(){o.remove()})),n.addEventListener("click",(function(){v.src=t,v.alt=e,S.textContent=e,b(c)})),o}document.addEventListener("keydown",(function(e){"Escape"===e.key&&L(document.querySelector(".popup_opened"))})),document.addEventListener("click",(function(e){e.target.classList.contains("popup_opened")&&L(e.target)}));var k={baseUrl:"https://nomoreparties.co/v1/plus-cohort-6",headers:{authorization:"98c6601a-800a-42cb-b9f5-2fd5c4ee4584","Content-Type":"application/json"}};fetch("https://nomoreparties.co/v1/plus-cohort-6/users/me",{method:"PATCH",headers:{authorization:"98c6601a-800a-42cb-b9f5-2fd5c4ee4584","Content-Type":"application/json"},body:JSON.stringify({name:"Marie",about:"PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP"})}),i.addEventListener("click",(function(){b(n)})),p.addEventListener("click",(function(){L(n)})),s.addEventListener("submit",(function(e){e.preventDefault();var t=d.value,o=_.value;l.textContent=t,a.textContent=o,L(n)})),m.addEventListener("click",(function(){document.getElementById("formPlace").reset(),b(r)})),f.addEventListener("click",(function(){L(r)})),E.addEventListener("click",(function(){L(c)})),q.addEventListener("submit",(function(e){e.preventDefault();var t=g(P.value,h.value);y.prepend(t),L(r)})),Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e){var t=Array.from(e.querySelectorAll(".popup__item")),n=e.querySelector(".popup__button");o(t,n),t.forEach((function(r){r.addEventListener("input",(function(){!function(e,t){t.validity.valid?function(e,t){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("popup__item_type_error"),o.classList.add("popup__item-error_activ"),o.textContent=""}(e,t):function(e,t,o){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.add("popup__item_type_error"),n.textContent=o,n.classList.add("popup__item-error_activ")}(e,t,t.validationMessage)}(e,r),o(t,n)}))}))}(e)})),g(),fetch("".concat(k.baseUrl,"/users/me"),{method:"GET",headers:k.headers}).then((function(e){return e.json()})).then((function(e){console.log(e)})),fetch("".concat(k.baseUrl,"/cards"),{method:"GET",headers:k.headers}).then((function(e){return e.json()})).then((function(e){e.forEach((function(e){y.prepend(g(e.name,e.link))}))}))})();